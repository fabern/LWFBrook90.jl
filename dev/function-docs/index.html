<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Function Documentations · LWFBrook90.jl</title><link rel="canonical" href="https://fabern.github.io/LWFBrook90.jl/function-docs/"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.png" alt="LWFBrook90.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit">LWFBrook90.jl</span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">About</a></li><li><a class="tocitem" href="../model/">SVAT Model</a></li><li><a class="tocitem" href="../user-guide/">User Guide</a></li><li><a class="tocitem" href="../example/">Example</a></li><li><a class="tocitem" href="../code-lst/">Code Listing</a></li><li class="is-active"><a class="tocitem" href>Function Documentations</a><ul class="internal"><li><a class="tocitem" href="#Functions-from-file-example/BEA2016...-input/func_run_example.jl"><span>Functions from file <code>example/BEA2016...-input/func_run_example.jl</code></span></a></li><li><a class="tocitem" href="#Functions-from-file-LWFBrook90.jl"><span>Functions from file <code>LWFBrook90.jl</code></span></a></li><li><a class="tocitem" href="#Functions-from-file-func_read_inputData.jl"><span>Functions from file <code>func_read_inputData.jl</code></span></a></li><li><a class="tocitem" href="#Functions-defining-the-DiffEq.jl-system-of-ODE-(p,-u0,-f,-callbacks,-...)"><span>Functions defining the DiffEq.jl system of ODE (p, u0, f, callbacks, ...)</span></a></li><li><a class="tocitem" href="#Functions-from-the-different-modules-defining-LWF-BROOK90"><span>Functions from the different modules defining LWF-BROOK90</span></a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Function Documentations</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Function Documentations</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/fabern/LWFBrook90.jl/blob/master/docs/src/function-docs.md#L" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Function-Documentations"><a class="docs-heading-anchor" href="#Function-Documentations">Function Documentations</a><a id="Function-Documentations-1"></a><a class="docs-heading-anchor-permalink" href="#Function-Documentations" title="Permalink"></a></h1><h2 id="Functions-from-file-example/BEA2016...-input/func_run_example.jl"><a class="docs-heading-anchor" href="#Functions-from-file-example/BEA2016...-input/func_run_example.jl">Functions from file <code>example/BEA2016...-input/func_run_example.jl</code></a><a id="Functions-from-file-example/BEA2016...-input/func_run_example.jl-1"></a><a class="docs-heading-anchor-permalink" href="#Functions-from-file-example/BEA2016...-input/func_run_example.jl" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="LWFBrook90.run_example-Tuple{}" href="#LWFBrook90.run_example-Tuple{}"><code>LWFBrook90.run_example</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">run_example()</code></pre><p>Run example simulation located in &quot;/example/BEA2016-reset-FALSE-input&quot; for 100 days and return a Dict containing the solution (solution object of DifferentialEquations.jl) and other variables useful for plotting.</p><p><strong>Example:</strong></p><pre><code class="language-none">using LWFBrook90
using Plots
example = LWFBrook90.run_example()

# Plot scalar solution
# Using dates (but not interpolated)
plot(example[&quot;solutionDates&quot;],
    example[&quot;solution&quot;][[1,2,3,4,5,6],:]&#39;,
    label=[&quot;GWAT&quot; &quot;INTS&quot; &quot;INTR&quot; &quot;SNOW&quot; &quot;CC&quot; &quot;SNOWLQ&quot;])

# Using simple plot recipe that interpolates, but without dates
plot(example[&quot;solution&quot;];
    vars = [1, 2, 3, 4, 5, 6],
    label=[&quot;GWAT&quot; &quot;INTS&quot; &quot;INTR&quot; &quot;SNOW&quot; &quot;CC&quot; &quot;SNOWLQ&quot;])

# Plot vector solution
x = example[&quot;solutionDates&quot;]
y = cumsum(example[&quot;thickness&quot;])
z = example[&quot;solution&quot;][7 .+ (0:example[&quot;NLAYER&quot;]-1), :]./example[&quot;thickness&quot;]
heatmap(x, y, z,
    yflip = true,
    xlabel = &quot;Date&quot;,
    ylabel = &quot;Depth&quot;,
    colorbar_title = &quot;θ&quot;)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/fabern/LWFBrook90.jl/blob/339613a868f1bd0c4c853bbcc87705ab0d260c13/example/BEA2016-reset-FALSE-input/func_run_example.jl#LL1-L34">source</a></section></article><h2 id="Functions-from-file-LWFBrook90.jl"><a class="docs-heading-anchor" href="#Functions-from-file-LWFBrook90.jl">Functions from file <code>LWFBrook90.jl</code></a><a id="Functions-from-file-LWFBrook90.jl-1"></a><a class="docs-heading-anchor-permalink" href="#Functions-from-file-LWFBrook90.jl" title="Permalink"></a></h2><h2 id="Functions-from-file-func_read_inputData.jl"><a class="docs-heading-anchor" href="#Functions-from-file-func_read_inputData.jl">Functions from file <code>func_read_inputData.jl</code></a><a id="Functions-from-file-func_read_inputData.jl-1"></a><a class="docs-heading-anchor-permalink" href="#Functions-from-file-func_read_inputData.jl" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="LWFBrook90.DateTime2RelativeDaysFloat-Tuple{Dates.DateTime, Dates.DateTime}" href="#LWFBrook90.DateTime2RelativeDaysFloat-Tuple{Dates.DateTime, Dates.DateTime}"><code>LWFBrook90.DateTime2RelativeDaysFloat</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">DateTime2RelativeDaysFloat(x,reference_DateTime)</code></pre><p>Transforms DateTimes <code>x</code> to simulation time</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/fabern/LWFBrook90.jl/blob/339613a868f1bd0c4c853bbcc87705ab0d260c13/src/func_read_inputData.jl#LL95-L99">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="LWFBrook90.RelativeDaysFloat2DateTime-Tuple{Float64, Dates.DateTime}" href="#LWFBrook90.RelativeDaysFloat2DateTime-Tuple{Float64, Dates.DateTime}"><code>LWFBrook90.RelativeDaysFloat2DateTime</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">RelativeDaysFloat2DateTime(t, reference_DateTime)</code></pre><p>Transforms simulation time <code>t</code> to DateTimes</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/fabern/LWFBrook90.jl/blob/339613a868f1bd0c4c853bbcc87705ab0d260c13/src/func_read_inputData.jl#LL104-L108">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="LWFBrook90.p_DOY-Tuple{Float64, Dates.DateTime}" href="#LWFBrook90.p_DOY-Tuple{Float64, Dates.DateTime}"><code>LWFBrook90.p_DOY</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">p_DOY(t::Float64, reference::DateTime)</code></pre><p>Get DOY (Day Of Year) from simulation time</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/fabern/LWFBrook90.jl/blob/339613a868f1bd0c4c853bbcc87705ab0d260c13/src/func_read_inputData.jl#LL114-L118">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="LWFBrook90.p_MONTHN-Tuple{Float64, Dates.DateTime}" href="#LWFBrook90.p_MONTHN-Tuple{Float64, Dates.DateTime}"><code>LWFBrook90.p_MONTHN</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">p_MONTHN(t::Float64, reference::DateTime)</code></pre><p>Get Month from simulation time</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/fabern/LWFBrook90.jl/blob/339613a868f1bd0c4c853bbcc87705ab0d260c13/src/func_read_inputData.jl#LL122-L126">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="LWFBrook90.read_LWFBrook90R_inputData-Tuple{String, String}" href="#LWFBrook90.read_LWFBrook90R_inputData-Tuple{String, String}"><code>LWFBrook90.read_LWFBrook90R_inputData</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">read_LWFBrook90R_inputData(folder::String, prefix::String)</code></pre><p>Load different input files for LWFBrook90:</p><ul><li>meteoveg</li><li>param</li><li>siteparam</li><li>pdur</li><li>soil_materials.csv</li><li>soil_nodes.csv</li></ul><p>These files were created with an R script <code>generate_LWFBrook90Julia_Input.R</code> that takes the same arguements as the R funciton <code>LWFBrook90R::run_LWFB90()</code> and generates the corresponding Julia input functions.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/fabern/LWFBrook90.jl/blob/339613a868f1bd0c4c853bbcc87705ab0d260c13/src/func_read_inputData.jl#LL6-L20">source</a></section></article><h2 id="Functions-defining-the-DiffEq.jl-system-of-ODE-(p,-u0,-f,-callbacks,-...)"><a class="docs-heading-anchor" href="#Functions-defining-the-DiffEq.jl-system-of-ODE-(p,-u0,-f,-callbacks,-...)">Functions defining the DiffEq.jl system of ODE (p, u0, f, callbacks, ...)</a><a id="Functions-defining-the-DiffEq.jl-system-of-ODE-(p,-u0,-f,-callbacks,-...)-1"></a><a class="docs-heading-anchor-permalink" href="#Functions-defining-the-DiffEq.jl-system-of-ODE-(p,-u0,-f,-callbacks,-...)" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="LWFBrook90.define_LWFB90_u0-NTuple{8, Any}" href="#LWFBrook90.define_LWFB90_u0-NTuple{8, Any}"><code>LWFBrook90.define_LWFB90_u0</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">define_LWFB90_u0()</code></pre><p>Generate vector u0 needed for ODE() problem in DiffEq.jl package.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/fabern/LWFBrook90.jl/blob/339613a868f1bd0c4c853bbcc87705ab0d260c13/src/func_DiffEq_definition_u0.jl#LL1-L5">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="LWFBrook90.define_LWFB90_p-NTuple{8, Any}" href="#LWFBrook90.define_LWFB90_p-NTuple{8, Any}"><code>LWFBrook90.define_LWFB90_p</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">define_diff_eq_parameters()</code></pre><p>Generate vector p needed for ODE() problem in DiffEq.jl package.</p><p><strong>Arguments</strong></p><ul><li><code>NLAYER::...</code>: TODO argument description.</li><li><code>IMODEL::...</code>: TODO argument description.</li><li><code>constant_dt_solver::...</code>: TODO argument description.</li><li><code>NOOUTF::...</code>: TODO argument description.</li><li><code>Reset::...</code>: TODO argument description.</li><li><code>compute_intermediate_quantities::...</code>: TODO argument description.</li><li><code>input_meteoveg::...</code>: TODO argument description.</li><li><code>input_siteparam::...</code>: TODO argument description.</li><li><code>input_param::...</code>: TODO argument description.</li><li><code>input_soil::...</code>: TODO argument description.</li><li><code>input_pdur::...</code>: TODO argument description.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/fabern/LWFBrook90.jl/blob/339613a868f1bd0c4c853bbcc87705ab0d260c13/src/func_DiffEq_definition_p.jl#LL3-L20">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="LWFBrook90.discretize_soil_params-NTuple{10, Any}" href="#LWFBrook90.discretize_soil_params-NTuple{10, Any}"><code>LWFBrook90.discretize_soil_params</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">discretize_soil_params(input_soil_materials,IMODEL, ILAYER, QLAYER, NLAYER)</code></pre><p>Define constant parameters from input_pdur. TO BE REDEFINED</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/fabern/LWFBrook90.jl/blob/339613a868f1bd0c4c853bbcc87705ab0d260c13/src/func_DiffEq_definition_p.jl#LL497-L501">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="LWFBrook90.interpolate_meteoveg-Tuple{DataFrames.DataFrame, Dates.DateTime, Any, Any, Any, Any, Any, Any}" href="#LWFBrook90.interpolate_meteoveg-Tuple{DataFrames.DataFrame, Dates.DateTime, Any, Any, Any, Any, Any, Any}"><code>LWFBrook90.interpolate_meteoveg</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">interpolate_meteoveg(input_meteoveg::DataFrame, input_meteoveg_reference_date::DateTime)</code></pre><p>Take climate and vegetation parameters in <code>input_meteoveg</code> and generates continuous parameters.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/fabern/LWFBrook90.jl/blob/339613a868f1bd0c4c853bbcc87705ab0d260c13/src/func_DiffEq_definition_p.jl#LL429-L433">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="LWFBrook90.define_LWFB90_cb-Tuple{}" href="#LWFBrook90.define_LWFB90_cb-Tuple{}"><code>LWFBrook90.define_LWFB90_cb</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">define_LWFB90_cb()</code></pre><p>Generate callback function cb needed for ODE() problem in DiffEq.jl package.</p><p>LWFBrook90 updates states INTS, INTR, SNOW, CC, SNOWLQ not continuously but only once per day. This operator splitting (daily vs continuous update of ODEs) is implemented by using this callback function which is called once per day.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/fabern/LWFBrook90.jl/blob/339613a868f1bd0c4c853bbcc87705ab0d260c13/src/func_DiffEq_definition_cb.jl#LL1-L9">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="LWFBrook90.define_LWFB90_ODE-Tuple{Any, Any, Any}" href="#LWFBrook90.define_LWFB90_ODE-Tuple{Any, Any, Any}"><code>LWFBrook90.define_LWFB90_ODE</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">define_LWFB90_ODE()</code></pre><p>Generates an ODEProblem from DiffEq.jl</p><p>An ODE problem which consists of</p><ul><li>definition of right-hand-side (RHS) function f</li><li>definition of callback function cb</li><li>initial condition of states</li><li>definition of simulation time span</li><li>parameters</li></ul><p>Seperate updating of different states (INTS, INTR, SNOW, CC, SNOWLQ are updated once per day while GWAT and SWATI are updated continuously) is implemented by means of operator splitting using a callback function for the daily updates and a ODE RHS (right hand side) for the continuous update.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/fabern/LWFBrook90.jl/blob/339613a868f1bd0c4c853bbcc87705ab0d260c13/src/func_DiffEq_definition_ode.jl#LL1-L17">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="LWFBrook90.MSBSETVARS-NTuple{54, Any}" href="#LWFBrook90.MSBSETVARS-NTuple{54, Any}"><code>LWFBrook90.MSBSETVARS</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">MSBSETVARS()</code></pre><p>Compute state dependent parameters for updating states INTS, INTR, SNOW, CC, SNOWLQ in callback function.</p><p><strong>Arguments</strong></p><ul><li>many</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/fabern/LWFBrook90.jl/blob/339613a868f1bd0c4c853bbcc87705ab0d260c13/src/func_MSB_functions.jl#LL2-L10">source</a></section></article><h2 id="Functions-from-the-different-modules-defining-LWF-BROOK90"><a class="docs-heading-anchor" href="#Functions-from-the-different-modules-defining-LWF-BROOK90">Functions from the different modules defining LWF-BROOK90</a><a id="Functions-from-the-different-modules-defining-LWF-BROOK90-1"></a><a class="docs-heading-anchor-permalink" href="#Functions-from-the-different-modules-defining-LWF-BROOK90" title="Permalink"></a></h2><pre><code class="language-">Modules = [LWFBrook90.CONSTANTS,
           LWFBrook90.GLBLDECL,
           LWFBrook90.KPT,
           LWFBrook90.WAT,
           LWFBrook90.SUN,
           LWFBrook90.PET,
           LWFBrook90.SNO,
           LWFBrook90.EVP
           ]
Pages   = [&quot;module_CONSTANTS.jl&quot;,
           &quot;module_GLBLDECL.jl&quot;,
           &quot;module_KPT.jl&quot;,
           &quot;module_WAT.jl&quot;,
           &quot;module_SUN.jl&quot;,
           &quot;module_PET.jl&quot;,
           &quot;module_SNO.jl&quot;,
           &quot;module_EVP.jl&quot;
           ]
Order = [:constant, :type, :function, :macro]</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../code-lst/">« Code Listing</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Tuesday 16 March 2021 14:04">Tuesday 16 March 2021</span>. Using Julia version 1.7.0-DEV.714.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
